(* Internal run-time library for lexers generated by mosmllex.
 * Closely based on the library for camllex.  Copyright 1993 INRIA, France. 
 *)

signature LEX_BUFFER =
sig

(*** Lexer buffers *)

type 'a lexbuf
        (* The type of lexer buffers. A lexer buffer is the argument passed
           to the scanning functions defined by the generated scanners.
           The lexer buffer holds the current state of the scanner, plus
           a function to refill the buffer from the input. 
	   The parameter 'a is the type returned by actions (and backtrack).
	   Typically it will be instantiated to a token type. *)

val sub : ('a lexbuf * int) -> char
val substring : ('a lexbuf * int * int) -> string

val setLastAction : 'a lexbuf -> (unit -> 'a) -> unit

val resetLastPos : 'a lexbuf -> unit
val resetStartPos : 'a lexbuf -> unit

val createLexbuf : string -> 'a lexbuf
        (* Create a lexer buffer which reads from
           the given string. Reading starts from the first character in
           the string. An end-of-input condition is generated when the
           end of the string is reached. *)

(*** Functions for lexer semantic actions *)

        (* The following functions can be called from the semantic actions
           of lexer definitions (the ML code enclosed in braces that
           computes the value returned by lexing functions). They give
           access to the character string matched by the regular expression
           associated with the semantic action. These functions must be
           applied to the argument ['a lexbuf], which, in the code generated by
           camllex, is bound to the lexer buffer passed to the parsing
           function. *)

val getLexeme : 'a lexbuf -> string
        (* [getLexeme lexbuf] returns the substring matched by
           the regular expression. *)

val getLexemeChar : 'a lexbuf -> int -> char
        (* [getLexemeChar lexbuf i] returns character number [i] in
           the matched string. *)

val getLexemeStart : 'a lexbuf -> int
        (* [getLexemeStart lexbuf] returns the position in the input stream
           of the first character of the matched string. The first character
           of the stream has position 0. *)

val getLexemeEnd : 'a lexbuf -> int
        (* [getLexemeEnd lexbuf] returns the position in the input stream
           of the character following the last character of the matched
           string. The first character of the stream has position 0. *)
(*--*)

(* The following definitions are used by the generated scanners only.
   They are not intended to be used by user programs. *)

val dummyAction : 'a lexbuf -> 'a
val getNextChar : 'a lexbuf -> char
val backtrack : 'a lexbuf -> 'a;

end (* signature LEX_BUFFER *)
