<HTML>
<HEAD><TITLE>Theory: bits</TITLE></HEAD>
<BODY bgcolor=linen text=midnightblue>
<H1><font color="black">Theory "bits"</font></H1>
<STRONG><font size=+3 color="black">Parents</font></STRONG>&nbsp;&nbsp;&nbsp;&nbsp;
    <A HREF = "listTheory.html"><STRONG><font color="black">list</font></STRONG></A>
    <A HREF = "optionTheory.html"><STRONG><font color="black">option</font></STRONG></A>

<H1><font color="black">Signature</font></H1>
<center>
<table BORDER=4 CELLPADDING=10 CELLSPACING=1>

    <tr>
    <th>
    <font color="crimson">Constant</font>
    <th>
    <font color="crimson">Type</font><tr><td>
                                         <STRONG><font color="black">DIVMOD_2EXP</font></STRONG>
                                         <td>
                                         :num -> num -> num # num
    <tr><td>
        <STRONG><font color="black">LSBn</font></STRONG>
        <td>
        :num -> bool
    <tr><td>
        <STRONG><font color="black">MOD_2EXP</font></STRONG>
        <td>
        :num -> num -> num
    <tr><td>
        <STRONG><font color="black">TIMES_2EXP</font></STRONG>
        <td>
        :num -> num -> num
    <tr><td>
        <STRONG><font color="black">SBIT</font></STRONG>
        <td>
        :bool -> num -> num
    <tr><td>
        <STRONG><font color="black">DIV_2EXP</font></STRONG>
        <td>
        :num -> num -> num
    <tr><td>
        <STRONG><font color="black">BIT</font></STRONG>
        <td>
        :num -> num -> bool
    <tr><td>
        <STRONG><font color="black">SLICE</font></STRONG>
        <td>
        :num -> num -> num -> num
    <tr><td>
        <STRONG><font color="black">BITS</font></STRONG>
        <td>
        :num -> num -> num -> num
    <tr><td>
        <STRONG><font color="black">BITWISE</font></STRONG>
        <td>
        :num -> (bool -> bool -> bool) -> num -> num -> num
    <tr><td> <STRONG><font color="black">DIV2</font></STRONG> <td> :num -> num
    
</table>
</center>

<H1><font color="black">Definitions</font></H1>
<DL>
<DT><STRONG><font color="black">DIV2_def</font></STRONG>
<DD>
<PRE>
|- !n. DIV2 n = n DIV 2
</PRE>

<DT><STRONG><font color="black">TIMES_2EXP_def</font></STRONG>
<DD>
<PRE>
|- !x n. TIMES_2EXP x n = n * 2 ** x
</PRE>

<DT><STRONG><font color="black">DIV_2EXP_def</font></STRONG>
<DD>
<PRE>
|- !x n. DIV_2EXP x n = n DIV 2 ** x
</PRE>

<DT><STRONG><font color="black">MOD_2EXP_def</font></STRONG>
<DD>
<PRE>
|- !x n. MOD_2EXP x n = n MOD 2 ** x
</PRE>

<DT><STRONG><font color="black">DIVMOD_2EXP_def</font></STRONG>
<DD>
<PRE>
|- !x n. DIVMOD_2EXP x n = (n DIV 2 ** x,n MOD 2 ** x)
</PRE>

<DT><STRONG><font color="black">SBIT_def</font></STRONG>
<DD>
<PRE>
|- !b n. SBIT b n = (if b then 2 ** n else 0)
</PRE>

<DT><STRONG><font color="black">BITS_def</font></STRONG>
<DD>
<PRE>
|- !h l n. BITS h l n = MOD_2EXP (SUC h - l) (DIV_2EXP l n)
</PRE>

<DT><STRONG><font color="black">BIT_def</font></STRONG>
<DD>
<PRE>
|- !b n. BIT b n = (BITS b b n = 1)
</PRE>

<DT><STRONG><font color="black">SLICE_def</font></STRONG>
<DD>
<PRE>
|- !h l n. SLICE h l n = MOD_2EXP (SUC h) n - MOD_2EXP l n
</PRE>

<DT><STRONG><font color="black">LSBn_def</font></STRONG>
<DD>
<PRE>
|- LSBn = BIT 0
</PRE>

<DT><STRONG><font color="black">BITWISE_def</font></STRONG>
<DD>
<PRE>
|- (!op x y. BITWISE 0 op x y = 0) /\
   !n op x y.
     BITWISE (SUC n) op x y =
     BITWISE n op x y + SBIT (op (BIT n x) (BIT n y)) n
</PRE>

</DL>


<HR>

<HR>
<H1><font color="black">Theorems</font></H1>
<DL>
<DT><STRONG><font color="black">DIV1</font></STRONG>
<DD>
<PRE>
|- !q. q DIV 1 = q
</PRE>

<DT><STRONG><font color="black">SUC_SUB</font></STRONG>
<DD>
<PRE>
|- SUC a - a = 1
</PRE>

<DT><STRONG><font color="black">DIV_MULT_1</font></STRONG>
<DD>
<PRE>
|- !r n. r < n ==> ((n + r) DIV n = 1)
</PRE>

<DT><STRONG><font color="black">NOT_ZERO_ADD1</font></STRONG>
<DD>
<PRE>
|- !m. ~(m = 0) ==> ?p. m = SUC p
</PRE>

<DT><STRONG><font color="black">ZERO_LT_TWOEXP</font></STRONG>
<DD>
<PRE>
|- !n. 0 < 2 ** n
</PRE>

<DT><STRONG><font color="black">MOD_2EXP_LT</font></STRONG>
<DD>
<PRE>
|- !n k. k MOD 2 ** n < 2 ** n
</PRE>

<DT><STRONG><font color="black">TWOEXP_DIVISION</font></STRONG>
<DD>
<PRE>
|- !n k. k = k DIV 2 ** n * 2 ** n + k MOD 2 ** n
</PRE>

<DT><STRONG><font color="black">TWOEXP_MONO</font></STRONG>
<DD>
<PRE>
|- !a b. a < b ==> 2 ** a < 2 ** b
</PRE>

<DT><STRONG><font color="black">TWOEXP_MONO2</font></STRONG>
<DD>
<PRE>
|- !a b. a <= b ==> 2 ** a <= 2 ** b
</PRE>

<DT><STRONG><font color="black">EXP_SUB_LESS_EQ</font></STRONG>
<DD>
<PRE>
|- !a b. 2 ** (a - b) <= 2 ** a
</PRE>

<DT><STRONG><font color="black">BITS_THM</font></STRONG>
<DD>
<PRE>
|- !h l n. BITS h l n = (n DIV 2 ** l) MOD 2 ** (SUC h - l)
</PRE>

<DT><STRONG><font color="black">BITSLT_THM</font></STRONG>
<DD>
<PRE>
|- !h l n. BITS h l n < 2 ** (SUC h - l)
</PRE>

<DT><STRONG><font color="black">DIV_MULT_LEM</font></STRONG>
<DD>
<PRE>
|- !m n. 0 < n ==> m DIV n * n <= m
</PRE>

<DT><STRONG><font color="black">MOD_2EXP_LEM</font></STRONG>
<DD>
<PRE>
|- !n x. n MOD 2 ** x = n - n DIV 2 ** x * 2 ** x
</PRE>

<DT><STRONG><font color="black">BITS2_THM</font></STRONG>
<DD>
<PRE>
|- !h l n. BITS h l n = n MOD 2 ** SUC h DIV 2 ** l
</PRE>

<DT><STRONG><font color="black">BITS_COMP_THM</font></STRONG>
<DD>
<PRE>
|- !h1 l1 h2 l2 n.
     h2 + l1 <= h1 ==>
     (BITS h2 l2 (BITS h1 l1 n) = BITS (h2 + l1) (l2 + l1) n)
</PRE>

<DT><STRONG><font color="black">BITS_DIV_THM</font></STRONG>
<DD>
<PRE>
|- !h l x n. BITS h l x DIV 2 ** n = BITS h (l + n) x
</PRE>

<DT><STRONG><font color="black">BITS_LT_HIGH</font></STRONG>
<DD>
<PRE>
|- !h l n. n < 2 ** SUC h ==> (BITS h l n = n DIV 2 ** l)
</PRE>

<DT><STRONG><font color="black">BITS_ZERO</font></STRONG>
<DD>
<PRE>
|- !h l n. h < l ==> (BITS h l n = 0)
</PRE>

<DT><STRONG><font color="black">BITS_ZERO2</font></STRONG>
<DD>
<PRE>
|- !h l. BITS h l 0 = 0
</PRE>

<DT><STRONG><font color="black">BITS_ZERO3</font></STRONG>
<DD>
<PRE>
|- !h n. BITS h 0 n = n MOD 2 ** SUC h
</PRE>

<DT><STRONG><font color="black">BITS_COMP_THM2</font></STRONG>
<DD>
<PRE>
|- !h1 l1 h2 l2 n.
     BITS h2 l2 (BITS h1 l1 n) = BITS (MIN h1 (h2 + l1)) (l2 + l1) n
</PRE>

<DT><STRONG><font color="black">NOT_MOD2_LEM</font></STRONG>
<DD>
<PRE>
|- !n. ~(n MOD 2 = 0) = (n MOD 2 = 1)
</PRE>

<DT><STRONG><font color="black">NOT_MOD2_LEM2</font></STRONG>
<DD>
<PRE>
|- !n a. ~(n MOD 2 = 1) = (n MOD 2 = 0)
</PRE>

<DT><STRONG><font color="black">EVEN_MOD2_LEM</font></STRONG>
<DD>
<PRE>
|- !n. EVEN n = (n MOD 2 = 0)
</PRE>

<DT><STRONG><font color="black">ODD_MOD2_LEM</font></STRONG>
<DD>
<PRE>
|- !n. ODD n = (n MOD 2 = 1)
</PRE>

<DT><STRONG><font color="black">LSB_ODD</font></STRONG>
<DD>
<PRE>
|- LSBn = ODD
</PRE>

<DT><STRONG><font color="black">DIV_MULT_THM</font></STRONG>
<DD>
<PRE>
|- !x n. n DIV 2 ** x * 2 ** x = n - n MOD 2 ** x
</PRE>

<DT><STRONG><font color="black">DIV_MULT_THM2</font></STRONG>
<DD>
<PRE>
|- !n. 2 * (n DIV 2) = n - n MOD 2
</PRE>

<DT><STRONG><font color="black">LESS_EQ_EXP_MULT</font></STRONG>
<DD>
<PRE>
|- !a b. a <= b ==> ?p. 2 ** b = p * 2 ** a
</PRE>

<DT><STRONG><font color="black">SLICE_LEM1</font></STRONG>
<DD>
<PRE>
|- !a x y.
     a DIV 2 ** (x + y) * 2 ** (x + y) =
     a DIV 2 ** x * 2 ** x - (a DIV 2 ** x) MOD 2 ** y * 2 ** x
</PRE>

<DT><STRONG><font color="black">SLICE_LEM2</font></STRONG>
<DD>
<PRE>
|- !a x y.
     n MOD 2 ** (x + y) = n MOD 2 ** x + (n DIV 2 ** x) MOD 2 ** y * 2 ** x
</PRE>

<DT><STRONG><font color="black">SLICE_LEM3</font></STRONG>
<DD>
<PRE>
|- !n h l. l < h ==> n MOD 2 ** SUC l <= n MOD 2 ** h
</PRE>

<DT><STRONG><font color="black">SLICE_THM</font></STRONG>
<DD>
<PRE>
|- !n h l. SLICE h l n = BITS h l n * 2 ** l
</PRE>

<DT><STRONG><font color="black">SLICELT_THM</font></STRONG>
<DD>
<PRE>
|- !h l n. SLICE h l n < 2 ** SUC h
</PRE>

<DT><STRONG><font color="black">BITS_SLICE_THM</font></STRONG>
<DD>
<PRE>
|- !h l n. BITS h l (SLICE h l n) = BITS h l n
</PRE>

<DT><STRONG><font color="black">BITS_SLICE_THM2</font></STRONG>
<DD>
<PRE>
|- !h l n. h <= h2 ==> (BITS h2 l (SLICE h l n) = BITS h l n)
</PRE>

<DT><STRONG><font color="black">MOD_2EXP_MONO</font></STRONG>
<DD>
<PRE>
|- !n h l. l <= h ==> n MOD 2 ** l <= n MOD 2 ** SUC h
</PRE>

<DT><STRONG><font color="black">SLICE_COMP_THM</font></STRONG>
<DD>
<PRE>
|- !h m l n.
     SUC m <= h /\ l <= m ==> (SLICE h (SUC m) n + SLICE m l n = SLICE h l n)
</PRE>

<DT><STRONG><font color="black">SLICE_ZERO</font></STRONG>
<DD>
<PRE>
|- !h l n. h < l ==> (SLICE h l n = 0)
</PRE>

<DT><STRONG><font color="black">BIT_COMP_THM3</font></STRONG>
<DD>
<PRE>
|- !h m l n.
     SUC m <= h /\ l <= m ==>
     (BITS h (SUC m) n * 2 ** (SUC m - l) + BITS m l n = BITS h l n)
</PRE>

<DT><STRONG><font color="black">NOT_BIT</font></STRONG>
<DD>
<PRE>
|- !n a. ~BIT n a = (BITS n n a = 0)
</PRE>

<DT><STRONG><font color="black">NOT_BITS</font></STRONG>
<DD>
<PRE>
|- !n a. ~(BITS n n a = 0) = (BITS n n a = 1)
</PRE>

<DT><STRONG><font color="black">NOT_BITS2</font></STRONG>
<DD>
<PRE>
|- !n a. ~(BITS n n a = 1) = (BITS n n a = 0)
</PRE>

<DT><STRONG><font color="black">BIT_SLICE</font></STRONG>
<DD>
<PRE>
|- !n a b. (BIT n a = BIT n b) = (SLICE n n a = SLICE n n b)
</PRE>

<DT><STRONG><font color="black">BIT_SLICE_LEM</font></STRONG>
<DD>
<PRE>
|- !y x n. SBIT (BIT x n) (x + y) = SLICE x x n * 2 ** y
</PRE>

<DT><STRONG><font color="black">BIT_SLICE_THM</font></STRONG>
<DD>
<PRE>
|- !x n. SBIT (BIT x n) x = SLICE x x n
</PRE>

<DT><STRONG><font color="black">SBIT_DIV</font></STRONG>
<DD>
<PRE>
|- !b m n. n < m ==> (SBIT b (m - n) = SBIT b m DIV 2 ** n)
</PRE>

<DT><STRONG><font color="black">BITS_SUC</font></STRONG>
<DD>
<PRE>
|- !h l n.
     l <= SUC h ==>
     (SBIT (BIT (SUC h) n) (SUC h - l) + BITS h l n = BITS (SUC h) l n)
</PRE>

<DT><STRONG><font color="black">BITS_SUC_THM</font></STRONG>
<DD>
<PRE>
|- !h l n.
     BITS (SUC h) l n =
     (if SUC h < l then 0 else SBIT (BIT (SUC h) n) (SUC h - l) + BITS h l n)
</PRE>

<DT><STRONG><font color="black">BIT_BITS_THM</font></STRONG>
<DD>
<PRE>
|- !h l a b.
     (!x. l <= x /\ x <= h ==> (BIT x a = BIT x b)) =
     (BITS h l a = BITS h l b)
</PRE>

<DT><STRONG><font color="black">BITWISE_LT_2EXP</font></STRONG>
<DD>
<PRE>
|- !n op a b. BITWISE n op a b < 2 ** n
</PRE>

<DT><STRONG><font color="black">LESS_EXP_MULT2</font></STRONG>
<DD>
<PRE>
|- !a b. a < b ==> ?p. 2 ** b = 2 ** (p + 1) * 2 ** a
</PRE>

<DT><STRONG><font color="black">BITWISE_THM</font></STRONG>
<DD>
<PRE>
|- !x n op a b. x < n ==> (BIT x (BITWISE n op a b) = op (BIT x a) (BIT x b))
</PRE>

<DT><STRONG><font color="black">BITWISE_COR</font></STRONG>
<DD>
<PRE>
|- !x n op a b.
     x < n ==>
     op (BIT x a) (BIT x b) ==>
     ((BITWISE n op a b DIV 2 ** x) MOD 2 = 1)
</PRE>

<DT><STRONG><font color="black">BITWISE_NOT_COR</font></STRONG>
<DD>
<PRE>
|- !x n op a b.
     x < n ==>
     ~op (BIT x a) (BIT x b) ==>
     ((BITWISE n op a b DIV 2 ** x) MOD 2 = 0)
</PRE>

<DT><STRONG><font color="black">MOD_PLUS_RIGHT</font></STRONG>
<DD>
<PRE>
|- !n. 0 < n ==> !j k. (j + k MOD n) MOD n = (j + k) MOD n
</PRE>

<DT><STRONG><font color="black">MOD_PLUS_1</font></STRONG>
<DD>
<PRE>
|- !n. 0 < n ==> !x. ((x + 1) MOD n = 0) = (x MOD n + 1 = n)
</PRE>

<DT><STRONG><font color="black">MOD_ADD_1</font></STRONG>
<DD>
<PRE>
|- !n. 0 < n ==> !x. ~((x + 1) MOD n = 0) ==> ((x + 1) MOD n = x MOD n + 1)
</PRE>

</DL>



<HR>
</BODY>
</HTML>
