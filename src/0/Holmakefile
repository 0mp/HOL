OPTIONS = NO_OVERLAY
FTAG_UI = $(protect $(SIGOBJ)/FinalTag-sig.ui)
FTYPE_UI = $(protect $(SIGOBJ)/FinalType-sig.ui)
FTERM_UI = $(protect $(SIGOBJ)/FinalTerm-sig.ui)

FTAG_UID = $(dprot $(SIGOBJ)/FinalTag-sig.ui)
FTERM_UID = $(dprot $(SIGOBJ)/FinalTerm-sig.ui)
TAG_UID = $(dprot $(SIGOBJ)/Tag.ui)


Raw-sig.uo: Raw-sig.sml KernelTypes.uo
	HOLMOSMLC -c -toplevel Raw-sig.sml

Thm.uo: Thm.sml Term.uo $(TAG_UID) Raw-sig.uo
	HOLMOSMLC -c -toplevel Raw-sig.ui Term.ui Type.ui Thm.sml

TheoryPP.uo: TheoryPP.sml Thm.uo
	HOLMOSMLC -c -toplevel Raw-sig.ui Type.ui Term.ui Thm.ui TheoryPP.sml

Theory.uo: Theory.sml TheoryPP.uo
	HOLMOSMLC -c -toplevel Raw-sig.ui Type.ui Term.ui Thm.ui TheoryPP.ui Theory.sml

Definition.uo: Definition.sml Theory.uo
	HOLMOSMLC -c -toplevel Raw-sig.ui Type.ui Term.ui Thm.ui Theory.ui Definition.sml

Net.uo: Net.sml Term.uo
	HOLMOSMLC -c -toplevel Raw-sig.ui Type.ui Term.ui Net.sml

Thm-sig.uo: Thm-sig.sml
	HOLMOSMLC -c -toplevel Thm-sig.sml

TheoryPP-sig.uo: TheoryPP-sig.sml
	HOLMOSMLC -c -toplevel TheoryPP-sig.sml

Theory-sig.uo: Theory-sig.sml
	HOLMOSMLC -c -toplevel Theory-sig.sml

Definition-sig.uo: Definition-sig.sml
	HOLMOSMLC -c -toplevel Definition-sig.sml

CoreKernel-sig.uo: CoreKernel-sig.sml Net-sig.uo \
                   Thm-sig.uo $(FTAG_UID) $(FTERM_UID) Theory-sig.uo \
                   TheoryPP-sig.uo Definition-sig.uo $(TAG_UID)
	HOLMOSMLC -c -toplevel $(FTAG_UI) $(FTYPE_UI) $(FTERM_UI) Thm-sig.ui \
                               Theory-sig.ui TheoryPP-sig.ui Net-sig.ui \
                               Definition-sig.ui CoreKernel-sig.sml

Net-sig.uo: Net-sig.sml
	HOLMOSMLC -c -toplevel Net-sig.sml

Overlay.uo: Overlay.sml CoreKernel-sig.uo Type.uo Term.uo $(FTAG_UID) Thm.uo \
            TheoryPP.uo Theory.uo Definition.uo Net.uo
	HOLMOSMLC -c -toplevel CoreKernel-sig.ui Type.ui Term.ui Thm.ui \
                               TheoryPP.ui Definition.ui $(FTAG_UI) Theory.ui \
                               Net.ui  Overlay.sml

HolKernel.uo: Overlay.uo HolKernel.sml
	HOLMOSMLC -c -structure Overlay.ui HolKernel.sml
