ifdef POLY
EXTRA_CLEANS = $(TARGET)

TARGET = $(dprot $(HOLDIR)/bin/hol.builder)

builder0 = $(HOLDIR)/bin/hol.builder0

boss_deps = listTheory pred_setTheory arithmeticTheory numLib \
            pred_setLib pred_setSimps numSimps optionTheory
DEPS = bossLib.uo $(patsubst %,$(dprot $(SIGOBJ)/%.uo),$(boss_deps)) \
       $(dprot $(builder0)) $(dprot $(HOLDIR)/tools-poly/builder.ML)

$(TARGET): $(DEPS)
	cd $(protect $(HOLDIR)/tools-poly) && \
            $(protect $(builder0)) < builder.ML && \
            cc -o $@ hol.builder.o $(POLY_LDFLAGS) && \
            rm hol.builder.o

endif
