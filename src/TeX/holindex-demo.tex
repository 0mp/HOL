\documentclass{article}

\usepackage{holindex}

\initHOLindex
\setHOLlinewidth{80}  %default is 80
%\setHOLoverrides{over} %optional

\begin{document}

\section{Holindex usage}

Similar usage as bibtex, makeindex etc.

\begin{enumerate}
\item create jobname.tex with header
\begin{verbatim}
\usepackage{holindex}
\initHOLindex
\setHOLlinewidth{80}  %optional default is 80
\setHOLoverrides{file}
\end{verbatim}
\item run \texttt{mkmunge.exe theories} to generate \texttt{munge.exe} for your theories
\item run latex on jobname.tex to generate jobname.hix
\item run \texttt{munge.exe -index jobname} to create jobname.tde and jobname.tid
\item rerun latex to use jobname.tid and jobname.tde
\item rerun the munger whenever some significant HOL stuff changed
\item if using emacs with AucTex you might want to add to your \texttt{.emacs}
\begin{alltt}
(eval-after-load "tex"
  '(add-to-list 'TeX-command-list
    '("Holindex" "munge.exe -index %s" 
       TeX-run-background t t :help "Run Holindex") t))
\end{alltt}
\end{enumerate}


\section{Defining}
\begin{verbatim}
   \defHOLtm{unique_id}{label}{def}
   \defHOLty{unique_id}{label}{def}
   \defHOLthm{unique_id}{label}{def}

   (Theorems don't need defining. Theorem IDs of the form
    theory.name are automatically recognised.
    The label is their name and the def
    is stored in the theory. Giving them an extra label
    will add this label after their name.

    You can define theorems anyhow. This is useful, when
    - the theorem name is too lengthy / contains special characters
    - you want to use one theorem with different formating options
    - you want to add a theorem several times to the index)

   Use the same formating options as the munger
   \formatHOLtm{unique_id}{options}
   \formatHOLty{unique_id}{options}
   \formatHOLthm{unique_id}{options}

   Combine definition and formating
   \formatDefHOLtm{unique_id}{label}{options}{def}
   \formatDefHOLty{unique_id}{label}{options}{def}

   Add it explicitly to the index (citations are added automatically)
   \indexHOLtm{unique_id}
   \indexHOLty{unique_id}
   \indexHOLthm{unique_id}

   Print long version in the index
   \longIndexHOLthm{unique_id}
   \longIndexHOLty{unique_id}
   \longIndexHOLtm{unique_id}
   \shortIndexHOLthm{unique_id}
   \shortIndexHOLty{unique_id}
   \shortIndexHOLtm{unique_id}

   Use boolean flags to determine the default
   \setboolean{holIndexLongTermFlag}{true}
   \setboolean{holIndexLongTypeFlag}{true}
   \setboolean{holIndexLongThmFlag}{false}

   Add comments in the index
   \commentHOLtm{unique_id}{comment}
   \commentHOLty{unique_id}{comment}
   \commentHOLthm{unique_id}{comment}
\end{verbatim}
%
Definitions like these inside a latex file are tedious,
especially for long terms. I strongly recommend using
an external file for all these definitions. There
is a construct
\begin{verbatim}
   \useHOLfile{filename}
\end{verbatim}
that parses files in a syntax similar to BibTex.
Printout of \texttt{holindex-demo.hdf}:

\begin{alltt}
@Term\{term_id_4,
   label = "a short description of term form external file",
   force_index,
   options = "width=20",
   content = ``SOME_FUN = SUC a < 0 /\ 0 > SUC b``
\}

@Type\{type_id_4,
   label = "a short description of the type from external file",
   force_index,
   short-index,
   content = ``:bool``
\}

@Thm\{arithmetic.LESS_SUC_EQ_COR,
   force-index,
   long-index
\}

@Thm\{thm_1,
   label = "(second instance)",
   content = "arithmetic.LESS_SUC_EQ_COR",
   options = "width=20",
   comment = "some lengthy\verb-\\-comment

              with \verb-\-textbf\{formats\} and newlines",
   force-index,
   long-index
\}

@Theorems{
   ids = [arithmetic.LESS_ADD_SUC,
          arithmetic.LESS_EQ*],
   force-index
}
\end{alltt}


%use external file
\useHOLfile{holindex-demo.hdf}

%or define inline (recommended only for short, simple ones)
\defHOLtm{term_id_1}{The first term}{SUC a > 0 /\ X > 2}
\defHOLtm{term_id_2}{The second term}{SUC a < 0 /\ X > 3}
\defHOLty{type_id_1}{The first type}{:bool}
\defHOLty{type_id_2}{The second type}{:num}
\formatDefHOLtm{term_width_5}{Test term width=5}{width=5}{SUC a > 0 /\ X > 2}
\formatDefHOLtm{term_width_10}{Test term width=10}{width=10}{SUC a > 0 /\ X > 2}
\formatDefHOLtm{term_width_50}{Test term width=50}{width=50}{SUC a > 0 /\ X > 2}



\section{Printing}

\begin{verbatim}
   Print inline
   \inlineHOLtm{id}
   \inlineHOLty{id}
   \inlineHOLthm{id}

   Print as block
   \blockHOLtm{id}
   \blockHOLty{id}
   \blockHOLthm{id}

   Use def without encapsulation (seldom useful)
   \useHOLtm{id}
   \useHOLty{id}
   \useHOLthm{id}
\end{verbatim}

\subsection{Block Examples}
\begin{itemize}
\item Example 1 \blockHOLtm{term_width_5}
\item Example 2 \blockHOLtm{term_width_10}
\item Example 3 \blockHOLtm{term_width_50}
\item Example 4 \blockHOLthm{arithmetic.DIVMOD_THM}
\end{itemize}


\subsection{Inline Examples}
\begin{itemize}
\item Example 1 \inlineHOLtm{term_width_5}
\item Example 2 \inlineHOLtm{term_width_10}
\item Example 3 \inlineHOLtm{term_width_50}
\item Example 4 \inlineHOLthm{arithmetic.DIVMOD_THM}
\end{itemize}



\section{Citing}

\begin{verbatim}
   Pure numbers
   \citePureHOLtm{id}
   \citePureHOLty{id}
   \citePureHOLthm{id}

   Single citations
   \citeHOLtm{id}
   \citeHOLty{id}
   \citeHOLthm{id}

   Multiple citations 
   \mciteHOLtm{id,id,...}
   \mciteHOLty{id,id,...}
   \mciteHOLthm{id,id,...}

   Hidden citations (adds page to index, 
      but does not print anything)
   \citeHiddenHOLtm{id}
   \citeHiddenHOLty{id}
   \citeHiddenHOLthm{id}


   Printing Index 
   \printHOLIndex
   \printShortHOLIndex 
   \printLongHOLIndex 

   Sort the index by occurence in the text, not by names
   \sortHOLIndexOccurence
\end{verbatim}

\citeHOLthm{arithmetic.LESS_SUC_EQ_COR}
\citeHOLtm{term_id_1}
\citeHOLty{type_id_2}

\mciteHOLthm{arithmetic.LESS_SUC_EQ_COR,prim_rec.INV_SUC_EQ,arithmetic.LESS_SUC_EQ_COR}

\pagebreak

\citeHOLthm{prim_rec.INV_SUC_EQ}
\citeHOLthm{arithmetic.PRE_SUC_EQ}

\pagebreak

\citeHOLthm{prim_rec.INV_SUC_EQ}
\citeHOLthm{arithmetic.PRE_SUC_EQ}

\pagebreak

\citeHOLthm{prim_rec.INV_SUC_EQ}

\pagebreak

\citeHOLthm{prim_rec.INV_SUC_EQ}
\citeHOLthm{arithmetic.PRE_SUC_EQ}
\citeHOLthm{list.list_repfns}

\longIndexHOLthm{arithmetic.PRE_SUC_EQ}
\shortIndexHOLty{type_id_2}
\commentHOLty{type_id_4}{Some short comment}

%Sort index by occurence
%\sortHOLIndexOccurence

\setboolean{holIndexLongTermFlag}{false}


\section{Long Index}
\printLongHOLIndex

\pagebreak
\section{Index}
\printHOLIndex

\pagebreak
\section{Short Index}
\printShortHOLIndex


\end{document}