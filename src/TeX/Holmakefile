TARGET = $(if $(findstring mosml,$(ML_SYSNAME)),munger.lex.sml,mkmunge)
EXTRA_CLEANS = munger.lex.sml mkmunge mkmunge.o munger.o

.PHONY: all
all: $(TARGET)

mkmunge: mkmunge.o
	cc -o $@ $< -L$(POLYMLLIBDIR) -lpolymain -lpolyml

mkmunge.o: poly-mkmkmunge.ML munger.lex.sml
	$(HOLDIR)/bin/hol < $<

munger.lex.sml: munger.lex
	$(MLLEX) $<

munger.lex.ui munger.lex.uo: munger.lex.sml mungeTools.ui
	$(HOLMOSMLC-C) -toplevel $<

mkmunger.uo: mkmunger.sml munger.lex.ui
	$(HOLMOSMLC-C) munger.lex.ui $<
