\chapter{Getting and Installing HOL}
\label{install}

This chapter describes how to get the \HOL{} system and how to install
it.  It is generally assumed that some sort of Unix system is being
used, but the instructions that follow should apply {\it mutatis
  mutandis\/} to other platforms.  Unix is not a pre-requisite for
using the system. \HOL{} may be run PCs running Windows NT, and we are
always interested in ports to other platforms.

\section{Getting HOL}

The \HOL{} system can be downloaded from
\mbox{\oneurl{\texttt{http://www.ftp.cl.cam.ac.uk/ftp/hvg/}}}.  This page on
the World-wide Web contains a number of sub-directories.  The system
discussed in this tutorial is \holn, so the \texttt{hol98}
sub-directory contains the appropriate source files.  The naming
scheme for \holn{} releases is $\langle${\it
  name}$\rangle$-$\langle${\it number}$\rangle$; the release
described here is \holnversion.

\section{The {\tt info-hol} mailing list}

Phil Windley has started a mailing list:
{\small\verb%info-hol@jaguar.cs.byu.edu%} which he set up to serve as a
forum
for discussing \HOL{} and disseminating news about it.  If you wish to be on
this list (which is recommended for all users of \HOL), or know of other
people who should be included, email to:
{\small\verb%info-hol-request@jaguar.cs.byu.edu%}.

\section{Installing HOL}

It is assumed that the \HOL{} sources have been obtained and the
\texttt{tar} file unpacked into a directory \ml{hol98}.\footnote{You may
  choose another name if you want; it is not important.} The contents
of this directory are likely to change over time, but it should
contain the following:


\begin{center}
\begin{tabular}{|l|l|l|} \hline
\multicolumn{3}{|c|}{ } \\
\multicolumn{3}{|c|}{\bf Principal Files on the HOL Distribution Directory} \\
\multicolumn{3}{|c|}{ } \\
{\it File name} & {\it Description} & {\it File type}  \\ \hline
{\tt README} & Description of directory {\tt hol} & Text\\
{\tt COPYRIGHT}& A copyright notice & Text\\
{\tt install.txt} & Installation instructions & Text\\
{\tt tools} & Source code for building the system & Directory\\
{\tt bin} & Directory for HOL executables & Directory\\
{\tt sigobj} & Directory for \ML{} object files & Directory\\
{\tt src} & \ML{} sources of \HOL & Directory\\
{\tt Manual} & Files for \HOL{} system documentation & Directory\\
{\tt help} & Help files for \HOL{} system & Directory\\
{\tt examples} & Example source files & Directory\\
\hline
\end{tabular}
\end{center}

The session in the box below shows a typical distribution directory.
The \HOL{} distribution has been placed on a PC running Linux in the
directory {\small\tt /local/scratch/mn200/hol98/}.

All sessions in this documentation will be displayed in boxes with a
number in the top right hand corner.  This number indicates whether
the session is a new one (when the number will be {\small\sl 1}) or
the continuation of a session started in an earlier box.
Consecutively numbered boxes are assumed to be part of a single
continuous session.  The Unix prompt for the sessions is
\texttt{\small \$}, so lines beginning with this prompt were typed by
the user.  After entering the \HOL{} system (see below), the user is
prompted with {\small\verb|-|} for an expression or command of the
\HOL{} meta-language \ML; lines beginning with this are thus \ML\
expressions or declarations.  Lines not beginning with \texttt{\small
  \$} or {\small\verb|-|} are system output.  Occasionally, system
output will be replaced with a line containing {\small\verb|...|} when
it is of minimal interest. The meta-language \ML{} is introduced in
Chapter~\ref{ML}.

\setcounter{sessioncount}{1}
\begin{session}
\begin{verbatim}
$ pwd
/local/scratch/mn200/hol98
$ ls -F
COPYRIGHT  bin/  examples/  install.txt  src/
README     doc/  help/      sigobj/      tools/
\end{verbatim}
\end{session}

Now you will need to rebuild \HOL{} from the sources.\footnote{It is
  possible that pre-built systems may soon be available from the
  web-page mentioned above.}

Before beginning you must have a current version of MoscowML.  In
particular, you must have version 1.44 or later.  MoscowML is
available on the web from
\[
\texttt{\oneurl{http://www.dina.kvl.dk/\~{}sestoft/mosml.html}}
\]
The first step of the installation process is to edit the file
\texttt{tools/configure.sml}.  At the top of the file are the
parameters that need to be set.

\begin{session}
\begin{verbatim}
$ cd tools/
$ head -30 configure.sml
(*---------------------------------------------------------------------------
              HOL98 configuration script

   First, edit the following user-settable parameters. Then execute this
   file by going

      mosml < configure.sml

 ---------------------------------------------------------------------------*)


(*---------------------------------------------------------------------------
          BEGIN user-settable parameters
 ---------------------------------------------------------------------------*)

val mosmldir = _
val holdir   = _
val OS       = _         (* Operating system; choices are:
                                "linux", "solaris", "unix", "winNT" *)

val CC       = "gcc";     (* C compiler (for building quote filter)        *)
val GNUMAKE  = "gnumake"; (* for robdd library                             *)

val DEPDIR   = ".HOLMK";  (* local dir. where Holmake dependencies kept    *)
val LN_S     = "ln -s";   (* only change if you are a HOL developer.       *)

(*---------------------------------------------------------------------------
          END user-settable parameters
 ---------------------------------------------------------------------------*)
\end{verbatim}
\end{session}

The first three parameters \emph{must} be set to sensible values.  The
\texttt{mosmldir} value must be the name of the directory where the
MoscowML implementation is on your machine.  The \texttt{holdir} value
must be the name of the top-level directory listed in the first
session above.  The \texttt{OS} value should be one of the strings
specified in the accompanying comment.   All three strings must be
enclosed in double quotes.

The next two values (\texttt{CC} and \texttt{GNUMAKE}) are needed for
``optional'' components of the system.  The first gives a string
suitable for invoking the system's C compiler, and the second
specifies a \textsf{make} program.

After editing, \texttt{tools/configure.sml} the lines above will look
something like:

\begin{session}
\begin{verbatim}
$ more configure.sml
  ...
val mosmldir = "/usr/groups/hol/mosml.144";
val holdir   = "/local/scratch/mn200/hol98";
val OS       = "linux"       (* Operating system; choices are:
                                "linux", "solaris", "unix", "winNT" *)

val CC       = "gcc";     (* C compiler (for building quote filter)        *)
val GNUMAKE  = "gnumake"; (* for robdd library                             *)
  ...
$
\end{verbatim}
\end{session}

\noindent Now, at either this level (in the \texttt{tools} directory)
or at the level above, the \texttt{configure.sml} script must be piped
into the MoscowML interpreter (called \texttt{mosml}).  This process
creates a suite of useful tools that will be used to build the full
system.  In particular, it will compile \textsf{Holmake} and
\textsf{build} and put them in the \texttt{bin} directory.

\begin{session}
\begin{verbatim}
$ /usr/groups/hol/mosml.144/bin/mosml < configure.sml
Moscow ML version 1.44 (August 1999)
Enter `quit();' to quit.
- > val mosmldir = "/usr/groups/hol/mosml.144" : string
- > val holdir = "/local/scratch/mn200/hol98" : string
- > val OS = "linux" : string
  val CC = "gcc" : string
  ...
Beginning configuration.
- Making bin/Holmake.
- Making bin/build.
- Making hol98-mode.el (for Emacs)
- Setting up the standard prelude.
- Setting up src/0/Globals.sml.
- Generating bin/hol.
- Attempting to compile quote filter ... successful.
Generating bin/hol.unquote.
- Setting up the robdd library Makefile.
- Setting up the muddy library Makefile.
-
Finished configuration!
-
$
\end{verbatim}
\end{session}

\noindent The next step is to run the \textsf{build} program.  This should
result in a great deal of output as all of the system code is compiled
and the theories built.  Eventually, a \HOL{} system\footnote{Two
  executables are produced: \textsf{hol} and \textsf{hol.unquote}.  The
  latter will be used for most examples in the \TUTORIAL{}.} is
produced in the \texttt{bin/} directory.

\begin{session}
\begin{verbatim}
$ ../bin/build
  ...
  ...
Uploading files to /local/scratch/mn200/Work/hol98/sigobj

Hol built successfully.
$
\end{verbatim}
\end{session}



%%% Local Variables:
%%% mode: latex
%%% TeX-master: "tutorial"
%%% End:
